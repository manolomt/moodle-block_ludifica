define(["jquery","core/notification","core/str","core/ajax","block_ludifica/alertc","core/modal_factory"],function(a,o,e,c,n,t){M.cfg.wwwroot;var i=[];return{init:function(t,r){r;var u=[{key:"avatarbuy",component:"block_ludifica"},{key:"avatarbuymessage",component:"block_ludifica"},{key:"buy",component:"block_ludifica"},{key:"notbuy",component:"block_ludifica"},{key:"bought",component:"block_ludifica"},{key:"avataruse",component:"block_ludifica"},{key:"avatarusemessage",component:"block_ludifica"},{key:"use",component:"block_ludifica"},{key:"avatarnotuse",component:"block_ludifica"},{key:"avatarused",component:"block_ludifica"},{key:"cancel"},{key:"continue"},{key:"error"},{key:"info"}];u.forEach(function(a,o){i[a.key]=a.key}),e.get_strings(u).then(function(a){a.forEach(function(a,o){i[u[o].key]=a})}),a('[data-action="buy"]').on("click",function(){var e=a(this).data("id");o.confirm(i.avatarbuy,i.avatarbuymessage,i.buy,i.cancel,function(){c.call([{methodname:"block_ludifica_buy_avatar",args:{id:e},done:function(o){if(o){n.success(i.bought);var c=a("#avatar-"+e);c.removeClass("usernothas"),c.addClass("userhas")}else n.error(i.notbuy)},fail:function(a){console.log("Error buy avatar"),console.log(a)}}])})}),a('[data-action="use"]').on("click",function(){var e=a(this).data("id");o.confirm(i.avataruse,i.avatarusemessage,i.use,i.cancel,function(){c.call([{methodname:"block_ludifica_use_avatar",args:{id:e},done:function(o){if(o){n.success(i.avatarused),a(".oneavatar.inuse").removeClass("inuse");var c=a("#avatar-"+e);c.addClass("inuse"),console.log(c)}else n.error(i.avatarnotuse)},fail:function(a){console.log("Error assigning avatar"),console.log(a)}}])})})}}});